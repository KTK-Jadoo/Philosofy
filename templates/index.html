<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Philosofy - Debate Simulator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>
    <div class="container">
        <header>
            <h1>Philosofy</h1>
            <h2>Debate Simulator</h2>
        </header>

        <section class="input-section">
            <h3>Enter a Statement to Generate Arguments</h3>
            <form method="POST">
                <textarea name="statement" rows="4" cols="50" placeholder="Type your statement here..."></textarea><br>
                <input type="submit" value="Generate Arguments">
            </form>
        </section>

        {% if for_argument and against_argument %}
        <section class="results-section">
            <h3>Generated Arguments</h3>
            <div class="argument">
                <h4>Argument For:</h4>
                <p>{{ for_argument }}</p>
            </div>
            <div class="argument">
                <h4>Argument Against:</h4>
                <p>{{ against_argument }}</p>
            </div>
        </section>

        <section class="continue-debate-section">
            <h3>Continue the Debate</h3>
            <form id="continue-debate-form">
                <textarea id="user_response" rows="4" cols="50" placeholder="Type your response here..."></textarea><br>
                <input type="hidden" id="previous_statement" value="{{ statement }}">
                <input type="button" value="Continue Debate" onclick="continueDebate()">
            </form>
            <div id="counter-argument"></div>
        </section>
        {% endif %}
    </div>

    <script>
        function continueDebate() {
            const previousStatement = document.getElementById('previous_statement').value;
            const userResponse = document.getElementById('user_response').value;

            fetch('/continue_debate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    previous_statement: previousStatement,
                    user_response: userResponse
                }),
            })
                .then(response => response.json())
                .then(data => {
                    if (data.counter_argument) {
                        document.getElementById('counter-argument').innerHTML = `
                        <h4>Counter Argument:</h4>
                        <p>${data.counter_argument}</p>
                    `;
                    }
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
        }
    </script>
</body>

</html>